@page "/"
@inject ISnackbar Snackbar

@using System.Diagnostics

@code {
	private void Reboot()
	{
		try
		{
			Process.Start("reboot");
			Snackbar.Add("Rebooting...", Severity.Success);
		}
		catch (Exception e)
		{
			Snackbar.Add(e.Message, Severity.Error);
		}
	}

	private void Shutdown()
	{
		try
		{
			Process.Start("poweroff");			
			Snackbar.Add("Shutting down...", Severity.Success);
		}
		catch (Exception e)
		{
			Snackbar.Add(e.Message, Severity.Error);
		}
	}

	private string? GetLocalIp()
	{
		var subnetBytes = NetworkManager.GetSubnets();
		if (subnetBytes is null)
		{
			return null;
		}


		return $"{subnetBytes[0]}.{subnetBytes[1]}.{subnetBytes[2]}.{subnetBytes[3]}";
	}
}

<PageTitle>Home</PageTitle>

<MudText>@GetLocalIp()</MudText>
<MudButton OnClick="Reboot" Color="Color.Error" Variant="Variant.Filled">Reboot</MudButton>
<MudButton OnClick="Shutdown" Color="Color.Error" Variant="Variant.Filled">Shutdown</MudButton>
